appTodos.config(function ($routeProvider, $locationProvider) {
    $routeProvider
        .when('/', {
            templateUrl: 'pages/home.html',
            controller: 'homeController',
            title: 'Todos - Home Page'
        })
        .when('/registration', {
            templateUrl: 'pages/registration.html',
            controller: 'registrationController',
            title: 'Todos - Registration Page'
        })
        .when('/login', {
            templateUrl: 'pages/login.html',
            controller: 'loginController',
            title: 'Todos - Login Page'
        })
        .when('/about', {
            templateUrl: 'pages/about.html',
            controller: 'aboutController',
            title: 'Todos - About Page'
        })
        .when('/contact', {
            templateUrl: 'pages/contact.html',
            controller: 'contactController',
            title: 'Todos - Contract Page'
        })
        .otherwise({
            redirectTo: '/'
        });
    $locationProvider.html5Mode(true);
});

appTodos.run(function ($location, $rootScope) {
    $rootScope.$on('$routeChangeSuccess', function (event, current, previous) {
        $rootScope.title = current.$$route.title;
    });
});
appTodos.factory('Users', function ($http) {
    var get = function ($_id, $filter) {
        var $url = 'http://api.tutorials.loc/api/users.php';
        if(typeof $_id != 'undefined' && $_id != null) {
            $url = 'http://api.tutorials.loc/api/users.php?_id=' + $_id;
            if(typeof $filter != 'undefined' && $filter.length > 0) {
                $url = $url + '&' + $filter;
            }
        } else if(typeof $filter != 'undefined' && $filter.length > 0) {
            $url = $url + '?' + $filter;
        }
        return $http.get($url)
            .then(
                function (response) {
                    return response.data;
                }, function (response) {
                    console.log('Error: ');
                    console.log(response);
                    return response;
                }
            );
    };
    var post = function (user) {
        return $http.post('http://api.tutorials.loc/api/users.php', user)
            .then(
                function(response){
                    return response.data;
                },
                function(response){
                    console.log('Error: ');
                    console.log(response);
                    return response;
                }
            );
    };
    var put = function(){

    };
    var remove = function($_id) {
        var $url = 'http://api.tutorials.loc/api/users.php';
        if(typeof $_id != 'undefined') {
            $url = 'http://api.tutorials.loc/api/users.php?_id=' + $_id;
        }
        return $http.get($url)
            .then(
                function (response) {
                    return response.data;
                }, function (response) {
                    console.log('Error: ');
                    console.log(response);
                    return response;
                }
            );
    };
    return {
        get: get,
        post: post,
        put: put,
        remove: remove
    }
});